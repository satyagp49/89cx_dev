C51 COMPILER V9.02   SCROLLLED_LOGIC_01                                                    11/23/2016 12:02:05 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE SCROLLLED_LOGIC_01
OBJECT MODULE PLACED IN ScrollLED_logic_01.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ScrollLED_logic_01.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REG51.H>
   2          #include <string.h>
   3          #include <lookup_table.h>
   4          
   5           sbit Serial_Data = P0^1;
   6           sbit SH_Clk = P0^0;
   7           sbit ST_Clk = P0^2;
   8          
   9          void delay_ms(unsigned int x)    // delays x msec (at fosc=11.0592MHz)
  10          {
  11   1              unsigned char j=0;
  12   1              while(x-- > 0)
  13   1              {
  14   2                      for (j=0; j<125; j++){;}
  15   2              }
  16   1      }
  17           
  18          void send_data(unsigned int temp){
  19   1       unsigned int Mask = 0x0001, t, Flag;
  20   1        for (t=0; t<16; t++){
  21   2         Flag = temp & Mask;
  22   2         if(Flag==0) Serial_Data = 0;
  23   2         else Serial_Data = 1;
  24   2         SH_Clk = 1;
  25   2         SH_Clk = 0;
  26   2         Mask = Mask << 1;
  27   2        }
  28   1        // Apply clock on ST_Clk
  29   1        ST_Clk = 1;
  30   1        ST_Clk = 0;  
  31   1      }
  32          //unsigned short dummyCharData [8] = { 0x0C, 0x1E, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x00};//{0x0E, 0x11, 0x11
             -, 0x11, 0x1F, 0x11, 0x11, 0x11};//{0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11};
  33          unsigned short dummyCharData [8] = {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01};
  34          unsigned int DisplayBuffer[]={0, 0, 0, 0, 0, 0, 0, 0};
  35          unsigned int speed;
  36          short  l, k, ShiftAmount, scroll, temp, shift_step=2, StringLength;
  37          char message[]="ABCD123";
  38          char index;
  39          void main() {
  40   1          unsigned char select_line = 0x00, count;
  41   1          StringLength = strlen(message) ;
  42   1          do {
  43   2              for (k=0; k<StringLength; k++){
  44   3                              for (scroll=0; scroll<(8/shift_step); scroll++) {
  45   4                                      for (ShiftAmount=0; ShiftAmount<8; ShiftAmount++){
  46   5                                              index = message[k];
  47   5                                              temp = CharData[index][ShiftAmount];
  48   5                          DisplayBuffer[ShiftAmount] = (DisplayBuffer[ShiftAmount] >> shift_step) | (temp << (9-
             -scroll*shift_step));
  49   5                                              //DisplayBuffer[ShiftAmount] = (DisplayBuffer[ShiftAmount] << shift_step) | (temp >> ((8-shift_step)-
             -scroll*shift_step));
  50   5                          send_data(DisplayBuffer[ShiftAmount]);
  51   5                          select_line = (0xFF & ~(0x01 << ShiftAmount));
  52   5                          P3 = select_line;
C51 COMPILER V9.02   SCROLLLED_LOGIC_01                                                    11/23/2016 12:02:05 PAGE 2   

  53   5                          delay_ms(20);
  54   5                                  } // l*/
  55   4                          } // scroll
  56   3                  } // k
  57   2              } while(1);
  58   1      }
*** WARNING C280 IN LINE 40 OF SCROLLLED_LOGIC_01.C: 'count': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    505    ----
   CONSTANT SIZE    =   2048    ----
   XDATA SIZE       =     57       2
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
