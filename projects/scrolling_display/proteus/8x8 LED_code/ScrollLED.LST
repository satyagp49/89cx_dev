C51 COMPILER V9.02   SCROLLLED                                                             11/22/2016 22:19:58 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE SCROLLLED
OBJECT MODULE PLACED IN ScrollLED.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ScrollLED.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REG51.H>
   2          #include <string.h>
   3          #include <lookup_table.h>
   4          
   5           sbit Serial_Data = P0^1;
   6           sbit SH_Clk = P0^0;
   7           sbit ST_Clk = P0^2;
   8          
   9          void delay_ms(unsigned int x)    // delays x msec (at fosc=11.0592MHz)
  10          {
  11   1              unsigned char j=0;
  12   1              while(x-- > 0)
  13   1              {
  14   2                      for (j=0; j<125; j++){;}
  15   2              }
  16   1      }
  17           
  18          void send_data(LED_MEM_REPLICA temp){
*** ERROR C141 IN LINE 18 OF SCROLLLED.C: syntax error near 'temp', expected ')'
  19   1       unsigned int t, Flag;
  20   1        for (t=0; t<LED_DISPLAY_ROW_SIZE; t++){
*** ERROR C202 IN LINE 20 OF SCROLLLED.C: 'LED_DISPLAY_ROW_SIZE': undefined identifier
  21   2         Flag = ((temp.row >> t) & 0x01);
  22   2         if(Flag==0) Serial_Data = 0;
  23   2         else Serial_Data = 1;
  24   2         SH_Clk = 1;
  25   2         SH_Clk = 0;
  26   2        }
  27   1        // Apply clock on ST_Clk
  28   1        ST_Clk = 1;
  29   1        ST_Clk = 0;  
  30   1      }
  31          
  32          unsigned short int DisplayBuffer [LED_DISPLAY_DIGITS][LED_DISPLAY_HIEGHT] = {{0x00}};
  33          unsigned int speed;
  34          short  l, k, m, ShiftAmount, scroll, temp, shift_step=1, StringLength;
  35          char message[]="ABCD123";
  36          char index;
  37          void main() {
  38   1          unsigned char select_line = 0x00, count;
  39   1          StringLength = strlen(message) ;
  40   1          do {
  41   2              for (k=0; k<StringLength; k++){
  42   3                              for (scroll=0; scroll<(LED_DISPLAY_WIDTH/shift_step); scroll++) {
  43   4                                      for (ShiftAmount=0; ShiftAmount<LED_DISPLAY_HIEGHT; ShiftAmount++){
  44   5                                              index = message[k];
  45   5                          for (l = 0x00; l < LED_DISPLAY_DIGITS; l ++) {
  46   6                              for (m = 0x00; m < LED_DISPLAY_HIEGHT; m ++) {
  47   7                                  DisplayBuffer [l][m] >>= 
  48   7                              }                                   
*** ERROR C141 IN LINE 48 OF SCROLLLED.C: syntax error near '}'
  49   6                          }
  50   5                                              temp = CharData[index][ShiftAmount];
  51   5                          DisplayBuffer[ShiftAmount] = (DisplayBuffer[ShiftAmount] >> shift_step) | (temp << ((L
             -ED_DISPLAY_ROW_SIZE -1) - (scroll*shift_step)));
C51 COMPILER V9.02   SCROLLLED                                                             11/22/2016 22:19:58 PAGE 2   

*** ERROR C202 IN LINE 51 OF SCROLLLED.C: 'LED_DISPLAY_ROW_SIZE': undefined identifier
  52   5                                              //DisplayBuffer[ShiftAmount] = (DisplayBuffer[ShiftAmount] << shift_step) | (temp >> ((8-shift_step)-
             -scroll*shift_step));
  53   5                                      }
  54   4                                      speed = 1;
  55   4                                      for(l=0; l<speed;l++){
  56   5                                              for (count=0; count<LED_DISPLAY_HIEGHT; count++) {
  57   6                                                      send_data(DisplayBuffer[count]);
  58   6                                                      select_line = (0xFF & ~(0x01 << count));
  59   6                                                      P3 = select_line;
  60   6                                                      delay_ms(10);
  61   6                                              }  // i
  62   5                                      } // l
  63   4                              } // scroll
  64   3                      } // k
  65   2              } while(1);
  66   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  4 ERROR(S)
